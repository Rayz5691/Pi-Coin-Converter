import { useState, useEffect } from "react";

export default function PiCoinConverter() { const [piPrice, setPiPrice] = useState(null); const [fiatRates, setFiatRates] = useState({}); const [piAmount, setPiAmount] = useState(""); const [fiatAmount, setFiatAmount] = useState(""); const [selectedFiat, setSelectedFiat] = useState("USD"); const [result, setResult] = useState(null);

useEffect(() => { async function fetchPrices() { try { const piResponse = await fetch( "https://api.coingecko.com/api/v3/simple/price?ids=pi-network&vs_currencies=usd" ); const piData = await piResponse.json(); setPiPrice(piData["pi-network"].usd);

const fiatResponse = await fetch(
      "https://api.exchangerate-api.com/v4/latest/USD"
    );
    const fiatData = await fiatResponse.json();
    setFiatRates(fiatData.rates);
  } catch (error) {
    console.error("Error fetching prices:", error);
  }
}
fetchPrices();

}, []);

const convertPiToFiat = () => { if (!piPrice || !fiatRates[selectedFiat]) return; const fiatValue = piAmount * piPrice * fiatRates[selectedFiat]; setResult(${fiatValue.toFixed(2)} ${selectedFiat}); };

const convertFiatToPi = () => { if (!piPrice || !fiatRates[selectedFiat]) return; const piValue = fiatAmount / (piPrice * fiatRates[selectedFiat]); setResult(${piValue.toFixed(4)} Pi); };

return ( <div className="flex flex-col items-center bg-gray-100 min-h-screen p-6"> <h1 className="text-3xl font-bold">Pi Coin Converter</h1> <p className="text-lg my-2">Current Pi Price: {piPrice ? ${piPrice} USD : "Loading..."}</p>

{/* Pi to Fiat */}
  <div className="bg-white p-4 shadow rounded-lg w-full max-w-md mt-4">
    <h2 className="text-xl font-semibold mb-2">Pi to Fiat</h2>
    <input
      type="number"
      value={piAmount}
      onChange={(e) => setPiAmount(e.target.value)}
      className="border p-2 w-full rounded"
      placeholder="Enter Pi amount"
    />
    <select
      value={selectedFiat}
      onChange={(e) => setSelectedFiat(e.target.value)}
      className="border p-2 w-full rounded mt-2"
    >
      {Object.keys(fiatRates).map((currency) => (
        <option key={currency} value={currency}>{currency}</option>
      ))}
    </select>
    <button
      onClick={convertPiToFiat}
      className="bg-blue-500 text-white p-2 rounded mt-2 w-full"
    >
      Convert
    </button>
  </div>

  {/* Fiat to Pi */}
  <div className="bg-white p-4 shadow rounded-lg w-full max-w-md mt-4">
    <h2 className="text-xl font-semibold mb-2">Fiat to Pi</h2>
    <input
      type="number"
      value={fiatAmount}
      onChange={(e) => setFiatAmount(e.target.value)}
      className="border p-2 w-full rounded"
      placeholder="Enter Fiat amount"
    />
    <select
      value={selectedFiat}
      onChange={(e) => setSelectedFiat(e.target.value)}
      className="border p-2 w-full rounded mt-2"
    >
      {Object.keys(fiatRates).map((currency) => (
        <option key={currency} value={currency}>{currency}</option>
      ))}
    </select>
    <button
      onClick={convertFiatToPi}
      className="bg-blue-500 text-white p-2 rounded mt-2 w-full"
    >
      Convert
    </button>
  </div>

  {result && (
    <p className="text-lg font-bold mt-4">Result: {result}</p>
  )}
</div>

); }

